---
title: 架構
---

像任何編譯器一樣，YAMLResume 也包含一個管道，通過多個階段將履歷資料從輸入轉換為輸出。

- **輸入階段**：接受 YAML 和 JSON 履歷文件作為輸入。
- **解析階段**：解析並驗證輸入文件中的履歷內容和佈局。
- **轉換階段**：使用管道轉換履歷內容和佈局資料。
- **程式碼生成階段**：使用 LaTeX 模板渲染履歷內容和佈局資料。
- **輸出階段**：生成最終的 PDF 文件。

以下是 YAMLResume 的架構圖：

<Mermaid chart="
  flowchart TD
    subgraph A[輸入階段]
      A1[YAML 履歷文件]
      A2[JSON 履歷文件]
    end

    subgraph B[解析階段]
      B1[yaml.parse]
      B2[模式驗證]
      B3[MarkdownParser]
    end

    subgraph C[轉換階段]
      C1[escape-latex 處理]
      C2[日期本地化]
      C3[URL 轉換]
      C4[位置轉換]
      C5[...]
    end

    subgraph D[程式碼生成階段]
      D1[模板渲染器]
      D2[moderncv-banking]
      D3[moderncv-classic]
      D4[moderncv-casual]
      E1[LaTeX 文件]
    end

    subgraph E[輸出階段]
      F1[xetex]
      F2[tectonic]
      G[resume.pdf]
    end

    A1 --> B1
    A2 --> B1
    B1 --> B2
    B2 --> B3
    B3 --> C1
    C1 --> C2
    C2 --> C3
    C3 --> C4
    C4 --> C5
    C5 --> D1
    D1 --> D2
    D1 --> D3
    D1 --> D4
    D2 --> E1
    D3 --> E1
    D4 --> E1
    E1 --> F1
    E1 --> F2
    F1 --> G
    F2 --> G

"/>

## 資料處理管道

轉換管道負責處理來自 YAML 文件的原始履歷資料，並為其準備 LaTeX 渲染。它在兩個主要階段運行：內容轉換和佈局轉換：

- 內容轉換階段處理所有文字資料，應用本地化規則，轉義 LaTeX 特殊字元，並計算派生值。
- 佈局轉換階段將使用者提供的佈局設置與預設值合併，並應用特定於區域的排版規則。

<Mermaid
  chart="
flowchart TD
  A[原始履歷資料] --> B[transformResume]
  B --> B1[transformResumeContent]
  B1 --> B2[transformEducationCourse]
  B2 --> B3[transformEducationDegree]
  B3 --> B4[transformDate]
  B4 --> B5[transformEndDate]
  B5 --> B6[transformKeywords]
  B6 --> B7[...]
  B --> C1[transformResumeLayout]
  C1 --> C2[設置預設值]
  C2 --> C3[設置區域調整]
  B7 --> D[轉換後的履歷]
  C3 --> D
  D --> D1[準備程式碼生成]
"
/>

對於像這樣的長資料處理管道，程式碼比文字更有說服力，如果您對實現感興趣，可以查看 [transform.ts](https://github.com/yamlresume/yamlresume/blob/main/packages/core/src/preprocess/transform.ts) 了解詳情。
